<!DOCTYPE html>
<html lang="pt-br">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Histórico de Descartes - INAC</title>
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet" />
  <style>
    html, body {
      height: 100%;
    }
    body {
      display: flex;
      flex-direction: column;
      background-color: #f8f9fa;
    }
    main {
      flex: 1;
    }
    footer {
      background-color: #004080;
      color: white;
      padding: 20px 0;
      text-align: center;
    }
    body.dark-mode {
      background-color: #121212;
      color: #e0e0e0;
    }
    body.dark-mode .table,
    body.dark-mode .table thead,
    body.dark-mode .table tbody {
      color: white;
    }
  </style>
</head>
<body>

<nav class="navbar navbar-dark bg-primary justify-content-center">
  <a class="navbar-brand d-flex align-items-center" href="index.html">
    <img src="img/logo.png" alt="Logotipo do Instituto Nova Ágora de Cidadania" style="height: 40px; margin-right: 10px;">
    INAC
  </a>
</nav>

<div class="text-end p-2 pe-4">
  <button class="btn btn-outline-dark btn-sm" onclick="alternarTema()" aria-label="Alternar tema para modo escuro ou claro" title="Tema">
    <svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" fill="currentColor" class="bi bi-moon-stars" viewBox="0 0 16 16">
      <path d="M6 .278a.768.768 0 0 1 .7.453 7.25 7.25 0 0 0 9.569 9.569.768.768 0 0 1 .453.7A8 8 0 1 1 6 .278z"/>
      <path d="M10.525 2.1a.5.5 0 0 1 .95 0l.287.86.909.045a.5.5 0 0 1 .276.893l-.703.516.262.872a.5.5 0 0 1-.77.55L11 5.625l-.736.611a.5.5 0 0 1-.77-.55l.262-.872-.703-.516a.5.5 0 0 1 .276-.893l.909-.045.287-.86z"/>
    </svg>
  </button>
</div>

<main class="container py-4">
  <h3 class="text-center mb-4">Histórico de Descartes</h3>

  <!-- Formulário para adicionar novo descarte -->
  <form id="form-descarte" class="mb-4">
    <div class="row g-3">
      <div class="col-md-4">
        <input type="date" id="data" class="form-control" required />
      </div>
      <div class="col-md-4">
        <input type="text" id="item" class="form-control" placeholder="Item" required />
      </div>
      <div class="col-md-2">
        <input type="number" id="quantidade" class="form-control" placeholder="Qtd" min="1" required />
      </div>
      <div class="col-md-2">
        <button type="submit" class="btn btn-primary w-100">Adicionar</button>
      </div>
    </div>
  </form>

  <!-- Tabela de histórico -->
  <div class="table-responsive">
    <table class="table table-bordered">
      <thead class="table-light">
        <tr>
          <th>Data</th>
          <th>Item</th>
          <th>Quantidade</th>
        </tr>
      </thead>
      <tbody>
        <tr>
          <td>12/04/2025</td>
          <td>Notebook</td>
          <td>1</td>
        </tr>
        <tr>
          <td>05/04/2025</td>
          <td>Carregador</td>
          <td>2</td>
        </tr>
      </tbody>
    </table>
  </div>

  <div class="text-center mt-4">
    <a href="perfil.html" class="btn btn-outline-secondary">Voltar ao Perfil</a>
  </div>
</main>

<footer>
  <div class="container">
    <p class="mb-0">&copy; 2025 Instituto Nova Ágora de Cidadania</p>
  </div>
</footer>

<script>
  // Alterna entre modo claro e escuro e salva no localStorage
  function alternarTema() {
    document.body.classList.toggle("dark-mode");
    localStorage.setItem("tema", document.body.classList.contains("dark-mode") ? "dark" : "light");
  }

  // Aplica o tema salvo ao carregar a página
  window.addEventListener("DOMContentLoaded", () => {
    if (localStorage.getItem("tema") === "dark") {
      document.body.classList.add("dark-mode");
    }
  });

  // Formulário para adicionar novo descarte em tempo real
  document.getElementById("form-descarte").addEventListener("submit", function (e) {
    e.preventDefault();

    const data = document.getElementById("data").value;
    const item = document.getElementById("item").value.trim();
    const quantidade = document.getElementById("quantidade").value;

    if (!data || !item || !quantidade) return;

    const tabela = document.querySelector("table tbody");
    const novaLinha = document.createElement("tr");

    novaLinha.innerHTML = `
      <td>${formatarData(data)}</td>
      <td>${item}</td>
      <td>${quantidade}</td>
    `;

    tabela.prepend(novaLinha); // adiciona no topo da tabela

    // Limpar campos após adicionar
    this.reset();
  });

  // Formata data de YYYY-MM-DD para DD/MM/YYYY
  function formatarData(dataISO) {
    const [ano, mes, dia] = dataISO.split("-");
    return `${dia}/${mes}/${ano}`;
  }
</script>

</body>
</html>
